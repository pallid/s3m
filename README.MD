# s3m 

> небольшая утилита для автоматизации задач с s3 (aws)

## Установка

(TODO) Надо описать установку

## Общие аргументы запуска

Общие:
| параметр | описание |
|---|---|
| -access-key *  | имя учетной записи для s3 |
| -secret-key * | секретный ключ учетной записи s3 |
| -bucket * | имя корзины s3 |
| -prefix * | путь до директории | 
| -tg-token | токен от телеграм бота |
| -tg-chat | идентификатор канала дл оповещения |

## Копирование

аргументы:
| параметры | описание|
|---|---|
| -source * | путь на хосте из которого необходимо сделать копирование в s3 |

Пример запуска копирование
```bash
s3m copy -access-key <access> -secret-key <secret> -bucket my-bucket -prefix backups/ -source /Users/dev/backups/

// output:
// Uploaded /Users/dev/backups/test1.fig
// Uploaded /Users/dev/backups/test2.fig
```


## Удаление

удаление старых папок с архивами, остаются n последних папок в таргетном каталоге

аргументы:
| параметры | описание|
|---|---|
| -skip | количество последних резервных копий, которые не будут удалены, по умолчанию 7 |


### Пример запуска удаления

```bash
s3m clear -access-key <access> -secret-key <secret> -bucket my-bucket -prefix backups/ -skip 7

// output:
// 2022/10/18 00:06:59 SKIP 17-10-2022 mod 2022-10-17 00:20:34.49 +0000 UTC
// 2022/10/18 00:06:59 SKIP 16-10-2022 mod 2022-10-16 00:20:37.752 +0000 UTC
// 2022/10/18 00:06:59 SKIP 15-10-2022 mod 2022-10-15 00:21:00.518 +0000 UTC
// 2022/10/18 00:06:59 SKIP 14-10-2022 mod 2022-10-14 00:22:21.918 +0000 UTC
// 2022/10/18 00:06:59 SKIP 13-10-2022 mod 2022-10-13 00:22:40.301 +0000 UTC
// 2022/10/18 00:06:59 SKIP 12-10-2022 mod 2022-10-12 00:22:25.418 +0000 UTC
// 2022/10/18 00:06:59 SKIP 11-10-2022 mod 2022-10-11 20:44:50.077 +0000 UTC
// 2022/10/18 00:06:59 WILL BE DELETE 10-10-2022 mod 2022-10-10 20:23:50.077 +0000 UTC
```

были удалены все файлы в у которых путь содержал `/backups/10-10-2022/...`

## Проверка орфографии

установка:

```bash
npm i -g cspell-cli
npm install -g @cspell/dict-ru_ru
```

запуск проверки:

```bash
cspell-cli -u -c cspell.json "**"
```

